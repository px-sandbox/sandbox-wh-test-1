#!/bin/bash

# Load the environment variables from .env file using dotenv
source .env

# Access the value of STAGE from the environment variables
stage=$STAGE

inputs=(
  'AUTH_PUBLIC_KEY | "LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQm9qQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FZOEFNSUlCaWdLQ0FZRUF1VlRFbit1cG14cUZ2NmhPUzRCawp0cnB3WWppZ1poM0FKNHlkN3gyNDJybEg3cWd0Kzh3MUNaWG9hU2FzMGFEaStVR05pRjZFWUJGV0Q1dG5XT3BVCnNlWDR4TkNVM3ZxYjEzd3FiYjJPalBpU25Zb21wdS8vMm5RUUF3M2xOajZZU0QzU3owM1lWanNNcDNLSWl4TXYKMTBlRnNBY1dsQnR4REZNV2hwdlJxWDdFMWt6VzdMVzQ4OS91M3ZwOVF0WGhYSTlsS1FwRmdZMTF2VThFK1lrTApHMi9ONGpBd0lvV1M4N3o2dmNVWmJRd21LTERBUmd3TE9ld3VMMnV5VlZZWndqQXU0U3pvd0pNNmNKa2ZqQ3FWCkRpdVpVRTA1RTJwdUVJWEVjMmhLZW1ObWJIL0ZJZmZaN3U3anB6TjBGcVdwenkxRGxzRGFCNFlmcElNSEJZTzgKNlBGTW5rN2JYSHFpeTR5cDhLY1hGNHNnMFUwTko1c0x2VHF4Um5MdFNHcDRMajd6MkZMY1E5UkZpOXdkbmkwYwpXN3k3ZWdlU2FvUm9sTG5Bd1JZMm9VaDhCT3YxVWthWkFiWkpOTUVVYVpCeUtMZys0QjdRRWo0OEE5cXZ0T1Z3CkhyaUIvT3UvemhPZjBPb3lhU0NDVWp3YUZpKy9ROUdtVXhkU0R3Z2hwS1dSQWdNQkFBRT0KLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCg=="'
  'AVAILABLE_PROJECT_KEYS | "PX,FUZE,TCP"'
  'GITHUB_APP_ID | "336051"'
  'GITHUB_APP_PRIVATE_KEY_PEM | "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBdkZyZmR3MmdaZUV5a3B0MEJpb1pMOW9uSEhoaXRqM0g3UjZMME9CMXVGRHYwRWdxCjFEdW5ia0dPMmZ4UkV0QjZMQzVkNmZhOFdqQURMUnlxMCtRT3gvVVJOQWNIb2lxeU9IYzd4OWs2RjFVQ0pmdFEKN0NmVjRXb0NVMmtObU94Nm1LSTM2bVI5c2owWklHS1lhKy94dzNxaWlua2Z4RjkreEZlNzcwUm9USHBFSGtiYwpJSjdyR1hyc204NmIrd2ZxTjFRVXQyZnFQVzYxWVVjMUVGc3lxMStHakx1QVJhUW8rVWxnK3lmNjF1UXZ0bmt5ClFBalN1Tk5hcTEwTDE1ZXM2QVliSjB5dGFEcG1jYityZXJaTWtQSVU4WVlqWWpLYkpMWEF3NmhzeEZKS0hQRG0KY2s0RTFLWWZORjkwVEprUlBYZWdoY2tyczA4Sk1td05yR3RrTHdJREFRQUJBb0lCQUVERTN1TUpoSWFFRWVmbwpITldoMUZkb0pOcmRhdFJRR2xlbmtWeWFVdUMydEVCakVKYzZqRENWeXBHYStpWUdHbnptMU5TSFMrMlhaUUEyClEyZnBuRXVXTWZ3NkRwM3RJS3ZhRkd4OGZrVlhyZzF4aGpvdTJKVlM1c25YN2gwUDlIaFlEL0pCN0JkR2UwVnYKb2dvNzBGN3Y1TVRKTWV0TkMwSnBDTzhXRHVkODdCNDVGWG11SFg0M3lGRXIwS1cySTQ5L096MW54ZzJUalYyUgpjVnI5dlNVM3dzeGxvd0RvRk5RbmVaejRZVGZ0OFRGSnRNZTRGZUlQRzZ2Rkw1dW41em1nT082WkVqdjh3eWVECjEwT1czUTVGd3lIUUR5OXU0VHgxZ0ZiNTY5djBubkl5QkpVRkpVZHJjcVZCNUNuN2RROXBraG5TLzg5TlJjV3IKT3p1UmdZRUNnWUVBOER1dVUranFzSGtTREhETVQ1WTREaXBRUE9tbDBQUHFVei85MENpWHNVMCt5QXZBbGJCaQoyK2lBSWtnU09wanhOSGg5SnMxckx5T3d6MjN4MGNwWGQ4VXdTMFI2QWJWQWd3L2ZCQktTVHRSR2pSeHA5QjRlCnJUT2ZBRFlaUFJPdjY2b0VjS1hwRDF2MHc3WXM4NjdGSW9CdUdJK3g5NHdibTk3bjFGWG5pamNDZ1lFQXlMZU4KVCs3Mk53aCtuS0s4MlEzRUIvaWdlOGlpaG5YWXhrTjRUSC8rSG8wT05JRnQrU1BPUnRaOE5PemNKOWFLZGRmOAo0bkl5Ym54elcvT0d1VnhSdHN6SCtEK3RJUTMwaVVaYWNWZHd4bFdzc2krV1Q4NDdpMDF2SHV4UmN0OC9wa0ZNCnRtdzZJVGpqbHJ5VC8wRTZpeHJXY081TzVJVFdUOElDNVdHam1ja0NnWUFUNno3bklqYmpid1o2RlpnN09SOW8KdlVWdDU0bWlLN2RRTTh3ZHlGL2JpYVljL0N4NXZPaFZoNCtvU0FXSzZrZUZyRC9rU2NBTFpwQXdndE04SytUWQp2M2JqcHNmZkFHSmErNlBvT0luOUUwak9SbjdhaU96T082dUJYdnIwdjM4a3NUSXhEUENvSDEzS0pIN1JyYm9XCnhFTmNzZjExb3g1ZTdEcVl0bzYrUFFLQmdCVFI1VmliUXZMbWNLdXl2Y0FPQzMyQUxyVm9WR042S2VnMjYyMlUKQVRvT0M2RXFvOHVxQ1NXVDdnSlhaMmJDZkU1SS96UkdBREV4dTQyWUx5dGZCaUxlRHdnVEl0UkE3RktvOTR5MgpNejUvZUpCckd6NWYrQkUxRVFlMkg2UzR2NU54UnBITm5DSUNFcWw2R2lmcURqYUxyQjYrdVhRK3l6UXV2Ym9wCmJKenhBb0dBVHNrb0N3YWUvOE8rUURsR05NamRNcUY3K2tlMzhEanhwYkRmYk53Y3pxbTB0YUVMR2hzN0NkbkUKMUNUaW83TzY2M0pObWJ0L1V1S05SckZlYmcyZGlvTlRNd3V3ZEJSRW1yZkZPcTlFaWlEU1RRWG04L0orUWR5QQpTTlcrZ0dBd1k2ZjcvN1BCQkdwajltV0JNMCsrbkRSTzR6NTdSQVJEdmNqalJteHZaMlE9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="'
  'GITHUB_BASE_URL | "https://api.github.com"'
  'GITHUB_SG_ACCESS_TOKEN  | "TBC"'
  'GITHUB_SG_INSTALLATION_ID | "37679766"'
  'GITHUB_WEBHOOK_SECRET | "09c3c7babc78309d1062f767a64b3e7c530ceab8"'
  'GIT_ORGANIZATION_ID | "134043223"'
  'JIRA_CLIENT_ID | "g0fv324KCFrBQ4S4UqXdRySPwMju94j2"'
  'JIRA_CLIENT_SECRET | "ATOA_AVcul3ZjyTAbsnitdEUZie1nYZO_bwk1rxZbgaIsF9hcMj3e6apOyY4r9UC7992A22F7347"'
  'JIRA_REDIRECT_URI | "https://lj8abzpxe1.execute-api.eu-west-1.amazonaws.com/jira/callback"'
  'OPENSEARCH_NODE | "http://localhost:9200"'
  'OPENSEARCH_PASSWORD | "TBC"'
  'OPENSEARCH_USERNAME | "TBC"'
  'REQUEST_TIMEOUT | "2000"'
  'ALLOWED_ISSUE_TYPES | "Epic,Story,Bug,Task,Sub-task"'
)

for ((i=0; i<${#inputs[@]}; i++))
do
    inputs_var=${inputs[i]}
    IFS='|' read -ra input_array <<< "$inputs_var"

    command="sst secrets set "
    
        full_command="$command ${input_array[0]} ${input_array[1]} --stage ${stage}"
        echo "Executing: $full_command"
        eval $full_command
        echo "----------------------------------------"
    
done
